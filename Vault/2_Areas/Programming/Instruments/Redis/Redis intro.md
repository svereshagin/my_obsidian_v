### üåü Redis: –û—Å–Ω–æ–≤—ã, –ü—Ä–∏–Ω—Ü–∏–ø—ã –∏ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**Redis** (Remote Dictionary Server) ‚Äî —ç—Ç–æ in-memory NoSQL-–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∫—ç—à, –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

---

### üîë –ö–ª—é—á–µ–≤—ã–µ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
1. **In-Memory Storage**  
   –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ ‚Üí —Å–∫–æ—Ä–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–∞ ~100,000 –æ–ø–µ—Ä–∞—Ü–∏–π/—Å–µ–∫.
2. **–î–∏—Å–∫–æ–≤–∞—è Persistence**  
   –û–ø—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:
   - **RDB** (—Å–Ω–∏–º–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è)
   - **AOF** (–ª–æ–≥ –æ–ø–µ—Ä–∞—Ü–∏–π)
3. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö**  
   –ù–µ —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫–∏, –∞ 10+ —Ç–∏–ø–æ–≤.
4. **–†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã**  
   Standalone, Sentinel (–æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å), Cluster (—à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ).

---

### üß© –û—Å–Ω–æ–≤–Ω—ã–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –°—Ç—Ä—É–∫—Ç—É—Ä—ã –î–∞–Ω–Ω—ã—Ö

#### 1. Strings (–°—Ç—Ä–æ–∫–∏)
–ú–∞–∫—Å–∏–º—É–º 512 –ú–ë. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∫—ç—à–∞, —Å—á—ë—Ç—á–∏–∫–æ–≤.
```python
import redis
r = redis.Redis()

r.set("user:1000:name", "Alice")
print(r.get("user:1000:name"))  # b'Alice'

# –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç —Å—á—ë—Ç—á–∏–∫–∞
r.incr("page:views:home")
```

#### 2. Hashes (–•–µ—à–∏)
–•—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.
```python
r.hset("user:1000", mapping={
    "name": "Alice",
    "email": "alice@example.com",
    "age": 30
})
print(r.hget("user:1000", "email"))  # b'alice@example.com'
```

#### 3. Lists (–°–ø–∏—Å–∫–∏)
–î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏ (deque). –î–ª—è –ª–æ–≥–æ–≤, –æ—á–µ—Ä–µ–¥–µ–π –∑–∞–¥–∞—á.
```python
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å
r.lpush("tasks", "send_email")
r.rpush("tasks", "generate_report")

# –û–±—Ä–∞–±–æ—Ç–∫–∞
task = r.rpop("tasks")
print(task)  # b'generate_report'
```

#### 4. Sets (–ú–Ω–æ–∂–µ—Å—Ç–≤–∞)
–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –Ω–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã. –î–ª—è —Ç–µ–≥–æ–≤, –∞–Ω–∞–ª–∏–∑–∞.
```python
r.sadd("article:123:tags", "python", "redis", "database")
print(r.smembers("article:123:tags"))  # {b'redis', b'database', b'python'}

# –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤
r.sinter("tag:python:articles", "tag:redis:articles")
```

#### 5. Sorted Sets (–£–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞)
–≠–ª–µ–º–µ–Ω—Ç—ã —Å score –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏. –î–ª—è —Ä–µ–π—Ç–∏–Ω–≥–æ–≤, –ª–∏–¥–µ—Ä–±–æ—Ä–¥–æ–≤.
```python
r.zadd("leaderboard", {"Alice": 100, "Bob": 85, "Charlie": 95})

# –¢–æ–ø-2 –∏–≥—Ä–æ–∫–æ–≤
print(r.zrevrange("leaderboard", 0, 1, withscores=True)) 
# [(b'Alice', 100.0), (b'Charlie', 95.0)]
```

#### 6. Streams (–ü–æ—Ç–æ–∫–∏)
–î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –∏ Pub/Sub. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Kafka.
```python
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
r.xadd("orders", {"user_id": 1000, "product": "book"})

# –ß—Ç–µ–Ω–∏–µ
streams = r.xread({"orders": 0}, count=2)
```

#### 7. Bitmaps (–ë–∏—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã)
–≠–∫–æ–Ω–æ–º–∏—á–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–∏—Ç–æ–≤—ã—Ö —Ñ–ª–∞–≥–æ–≤. –î–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.
```python
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏—Ç–∞
r.setbit("online:2024-05-01", user_id=1000, value=1)

# –ü–æ–¥—Å—á—ë—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
print(r.bitcount("online:2024-05-01"))
```

#### 8. HyperLogLog (HLL)
–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–π –ø–æ–¥—Å—á—ë—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π. –ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å ~0.81%.
```python
r.pfadd("visitors:2024-05-01", "192.168.1.1", "192.168.1.2")
print(r.pfcount("visitors:2024-05-01"))  # ‚âà2
```

---

### ‚öôÔ∏è –ü—Ä–∏–Ω—Ü–∏–ø—ã –†–∞–±–æ—Ç—ã

#### 1. –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
- **–ö–ª—é—á–µ–≤—ã–µ —Ö—ç—à-—Å–ª–æ—Ç—ã**: 16384 —Å–ª–æ—Ç–∞, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ CRC16

#### 2. Persistence (–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ)
| –ú–µ—Ç–æ–¥       | –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã                     | –ü–ª—é—Å—ã / –ú–∏–Ω—É—Å—ã               |
|-------------|-------------------------------------|-------------------------------|
| **RDB**     | –°–Ω–∏–º–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã   | + –ö–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç—å, + –°–∫–æ—Ä–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è<br>- –†–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö |
| **AOF**     | –õ–æ–≥ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ (append-only)  | + –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å<br>- –ú–µ–¥–ª–µ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, –ë–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä |

#### 3. –†–µ–ø–ª–∏–∫–∞—Ü–∏—è
- **Master-Replica**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è
- **Read Scaling**: –†–µ–ø–ª–∏–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —á—Ç–µ–Ω–∏–µ

#### 4. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
```python
# MULTI/EXEC - –∞—Ç–æ–º–∞—Ä–Ω–∞—è –≥—Ä—É–ø–ø–∞ –∫–æ–º–∞–Ω–¥
pipe = r.pipeline()
pipe.multi()
pipe.incr("counter")
pipe.expire("counter", 60)
pipe.execute()
```

---

### üí° –ü—Ä–∏–º–µ—Ä—ã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Django
```python
# settings.py
CACHES = {
    "default": {
        "BACKEND": "django_redis.cache.RedisCache",
        "LOCATION": "redis://127.0.0.1:6379/1",
    }
}
```

#### –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á —Å RQ (Redis Queue)
```python
from rq import Queue
from redis import Redis
import jobs

redis_conn = Redis()
queue = Queue(connection=redis_conn)

# –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á–∏ –≤ –æ—á–µ—Ä–µ–¥—å
queue.enqueue(jobs.send_email, "user@example.com")
```

#### Rate Limiting
```python
def rate_limited(key, limit=10, window=60):
    if r.setnx(key, limit):
        r.expire(key, window)
    
    bucket = r.get(key)
    if int(bucket) > 0:
        r.decr(key)
        return True
    return False  # –õ–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω
```

---

### ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Redis
1. **–î–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏**: –¢—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–∏—Ö RAM-—Ä–µ—Å—É—Ä—Å–æ–≤
2. **–ù–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤**: –ù–µ—Ç JOIN, —Å–ª–æ–∂–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
3. **ACID**: –ß–∞—Å—Ç–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (–Ω–µ—Ç rollback)
4. **–ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä –∫–ª—é—á–∞**: 512 –ú–ë

---

### üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
1. **Pipelining**: –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∫–æ–º–∞–Ω–¥
   ```python
   pipe = r.pipeline()
   for i in range(1000):
       pipe.set(f"key:{i}", i)
   pipe.execute()
   ```
2. **Lua-—Å–∫—Ä–∏–ø—Ç—ã**: –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
3. **–ö–ª—é—á–∏ —Å TTL**: –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ `EXPIRE`
4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Hash Tags**: –î–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∞: `{user1000}.profile`, `{user1000}.contacts`

Redis ‚Äî –∏–¥–µ–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö —Å–∫–æ—Ä–æ—Å—Ç–∏: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—á–µ—Ä–µ–¥–∏, —Ä–µ–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞. –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∏—Ä—É–π—Ç–µ —Å –¥–∏—Å–∫–æ–≤—ã–º–∏ –°–£–ë–î.